<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript">
var question_no = 0
var results_html = ""
var results_list = []
var result_number = 0
var result_no = ""
var result_explanation_list = []
//stores how many answers are in each question
var questionAnswersArray = []
function add_question(){
	question_no++
	var html_question_begining = "<div id='q"
	var html_question_middle = "'><table border=2 id='tq" + question_no + "'><tr class='results' id='resultsq" + question_no + "'><td><button type='button' onclick='add_answer(" + question_no + ");'>Add Answer </button> </td></tr><tr><td>Question<input id='question"
	//here will need to change based on the quiz type
	var html_question_end = "' name='question" + question_no + "' ></input><br/></td></tr> <tr class='a1' id='a1q" + question_no + "'><td>Answer1<input id='option1button' name='answer1_q" + question_no + "'></input><br/>     </td></tr><tr class='a2' id='a2q" + question_no + "'><td>Answer2<input id='option2button' name='answer2_q" + question_no + "'></input>"
	//old stuff for adding for answers, we can use it when we have defined quiz types
	//<tr class='a1' id='a1q" + question_no + "'><td>Answer1<input id='option1button' name='answer1_q" + question_no + "'></input><br/></td></tr><tr class='a2' id='a2q" + question_no + "'><td>Answer2<input id='option2button' name='answer2_q" + question_no + "'></input><br/></td></tr><tr class='a3' id='a3q" + question_no + "'><td>Answer3<input id='option3button' name='answer3_q" + question_no + "'></input><br/></td></tr><tr class='a4' id='a4q" + question_no + "'><td>Answer4<input id='option4button' name='answer4_q" + question_no + "'></input><br/></td></tr></div></table>"
	$("#questions").append(html_question_begining + question_no + html_question_middle + question_no +  html_question_end)
	results_no = "#resultsq" + question_no
	questionAnswersArray[question_no] = 2
	for (var i = 1; i < results_list.length + 1; i++)
	{
		$(results_no).append("<td title='" + result_explanation_list[i-1] + "'>" + results_list[i-1] +  "</td>")  
	}
	for (var i = 1; i < questionAnswersArray[question_no]+1; i++) {
		add_result(question_no,i)	
	}
	$("#questionAnswersArray").val(questionAnswersArray)
}
//this adds results to individual answers
function add_result(question,answer){
	//$("#a" + answer + "q" + question).append
	for (var i = 1; i < results_list.length + 1; i++) {
		$("#a" + answer + "q" + question).append("<td><input type='text' name='r" + answer + "_" + i +"_" + question + "'></input></td>")
	}
}
function add_answer(question){
	var answersInQuestion = 1+questionAnswersArray[question]
	$("#tq" + question).append("<tr class ='a" + answersInQuestion + "' id='a" + answersInQuestion + "q" + question + "'><td>Answer" + answersInQuestion + "<input name='answer" + answersInQuestion + "_q" + question + "'></input><br/></td></tr>")
	add_result(question,questionAnswersArray[question] + 1)
	questionAnswersArray[question]++
	$("#questionAnswersArray").val(questionAnswersArray)
	
}
function add_results(){
	if ($("#result").val() == ""){
		if ($("#errorMessages").text() != "Give your Result a name!"){
			$("#errorMessages").append("Give your Result a name!")
		}
	}
	else{
		$("#errorMessages").empty()
	result_number++
	var result = $("#result").val()
	results_list.push(result)
	var result_explanation = $("#result_explanation").val()
	result_explanation_list.push(result_explanation)
	$(".results").append("<td title='"+ result_explanation  + "'>"  +result+"</td>")
	for (var i =1; i < question_no +1; i++) {
		for (var j = 1; j < questionAnswersArray[i]+1; j++){
			//add_result(i,j)
			$("#a" + j + "q" + i).append("<td><input type='text' name='r" + j + "_" + result_number +"_" + i + "'></input></td> ")	
		}
	}	
	results_html += "<td>" + result + "</td>"
	$("#All_Results").val(results_list)
	$("#All_Results_Explanation").val(result_explanation_list)
	}
}

</script>
<body onload="add_question()">

	<h2>Welcome to Quiz Creator!</h2>
	<h3>Begin by naming and describing your questions in the fields next to Quiz name and Quiz description</h3><br/>
	<h3>Then start adding results or questions</h3><br/>
	<h3>To add a question, first type in the question then each of the possible answers, click the add question button to add another question</h3><br/>
	<h3>A result is what a user will get when they're done with the quiz, each pair of answers and results has an input associated with it which signifies how many points towards that result the user will get for selecting that answer, when the user is finished with the quiz their result will be the result which they scored highest on</h3>
	
<form action="created/" method="post"> 
{% csrf_token %}
Quiz name:<input type="text" name="Quiz_Name" required> 
Result name: <input type="text" id="result" required ></input> <button type = "button" onclick="add_results();">
Add another Result</button><br>
Quiz description: <input type="text" name="Quiz_Description">
Result explanation <input type="text" name="explanation" id="result_explanation"></input> <br>
<input type="hidden" type = 'text' id='All_Results' name='All_Results'>
<input type="hidden" type = "text" id="All_Results_Explanation" name="All_Results_Explanation">
<input type="hidden" type = "text" id="questionAnswersArray" name="questionAnswersArray">
<div id="errorMessages"></div>
<div id="questions"></div>
</input>

<button type="button" onclick="add_question();">Add another question</button>
<input type="submit" value="Submit Quiz" /></form>
</body>
